(this.webpackJsonprengorum=this.webpackJsonprengorum||[]).push([[0],{118:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=118},205:function(e,t,a){},253:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},273:function(e,t,a){e.exports=a.p+"static/media/resume.c8820523.pdf"},286:function(e,t,a){e.exports=a(589)},291:function(e,t,a){},297:function(e,t,a){},300:function(e,t,a){},301:function(e,t,a){},379:function(e,t,a){},380:function(e,t,a){},428:function(e,t,a){},446:function(e,t,a){},447:function(e,t,a){},451:function(e,t,a){},452:function(e,t,a){},453:function(e,t,a){},454:function(e,t,a){},455:function(e,t,a){},456:function(e,t,a){},457:function(e,t,a){},547:function(e,t,a){},548:function(e,t,a){},549:function(e,t,a){},550:function(e,t,a){},551:function(e,t,a){},555:function(e,t){},557:function(e,t){},558:function(e,t){},559:function(e,t){},560:function(e,t){},586:function(e,t,a){},587:function(e,t,a){},588:function(e,t,a){},589:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(43),o=a.n(s),i=(a(291),a(292),a(21)),l=a(23),c=a(51),d=a(249);a(297);var m=e=>n.a.createElement("div",{className:e.className||"loader"},n.a.createElement("div",{className:"loader-spinning-wheel"})),h=a(44),u=a(14);const E={isLoading:!1,isAuthenticated:!1,username:null,name:null,avatar:null,token:null,isStaff:!1,error:null},p={isEditing:!1,editError:null,editSuccess:!1},g=Object(u.a)({},E,{},p);var S=(e=g,t)=>{switch(t.type){case"LOGIN_REQUEST":return Object(u.a)({},e,{isLoading:!0,isAuthenticated:!1,error:null});case"LOGIN_SUCCESS":return Object(u.a)({},e,{isLoading:!1,isAuthenticated:!0,token:t.token,username:t.username,avatar:t.avatar,name:t.name,isStaff:t.isStaff,error:null});case"LOGIN_FAILURE":return Object(u.a)({},e,{},E,{error:t.error});case"EDIT_PROFILE_REQUEST":return Object(u.a)({},e,{isEditing:!0,editError:null,editSuccess:!1});case"EDIT_PROFILE_SUCCESS":return Object(u.a)({},e,{isEditing:!1,editError:null,editSuccess:!0,avatar:t.avatar||e.avatar,name:t.name||e.name});case"EDIT_PROFILE_FAILURE":return Object(u.a)({},e,{},p,{editError:t.error});case"EDIT_PROFILE_RESET":return Object(u.a)({},e,{},p);case"LOGIN_RESET":return Object(u.a)({},e,{},E);case"LOGOUT":return g;default:return e}};const f={modalType:null,modalProps:{}};var C=(e=f,t)=>{switch(t.type){case"SHOW_MODAL":return{modalType:t.modalType,modalProps:t.modalProps};case"HIDE_MODAL":return{modalType:null,modalProps:{}};default:return e}};const w={isLoading:!1,error:null};var T=(e=w,t)=>{switch(t.type){case"REGISTER_REQUEST":return Object(u.a)({},e,{isLoading:!0,error:null});case"REGISTER_SUCCESS":return{isLoading:!1,error:null};case"REGISTER_FAILURE":return{isLoading:!1,error:t.error};case"REGISTER_RESET":return w;default:return e}};const v={isLoading:!1,profile:null,error:null};var L=(e=v,t)=>{switch(t.type){case"FETCH_USER_PROFILE_REQUEST":return Object(u.a)({},e,{isLoading:!0,error:null});case"FETCH_USER_PROFILE_SUCCESS":return{isLoading:!1,profile:t.profile,error:null};case"FETCH_USER_PROFILE_FAILURE":return Object(u.a)({},v,{error:t.error});default:return e}};const b={isLoading:!1,forums:null,error:null};var y=(e=b,t)=>{switch(t.type){case"FETCH_HOME_REQUEST":return Object(u.a)({},e,{isLoading:!0,error:null});case"FETCH_HOME_SUCCESS":return{isLoading:!1,forums:t.forums,error:null};case"FETCH_HOME_FAILURE":return Object(u.a)({},b,{error:t.error});default:return e}};const _={isLoading:!1,users:null,error:null};var R=(e=_,t)=>{switch(t.type){case"FETCH_USERS_REQUEST":return Object(u.a)({},e,{isLoading:!0,error:null});case"FETCH_USERS_SUCCESS":return{isLoading:!1,users:t.users,error:null};case"FETCH_USERS_FAILURE":return Object(u.a)({},_,{error:t.error});default:return e}};const N={isLoading:!1,name:null,slug:null,description:null,threads:null,error:null},P={newThreadLoading:!1,newThreadSuccess:!1,newThreadName:"",newThreadContent:"",newThreadId:null,newThreadError:null,newThreadShow:!1},O=Object(u.a)({},N,{},P);var I=(e=O,t)=>{switch(t.type){case"FETCH_FORUM_REQUEST":return Object(u.a)({},N,{},e,{newThreadLoading:!1,newThreadSuccess:!1,newThreadId:null,newThreadError:null,newThreadShow:!1,isLoading:!0,error:null});case"FETCH_FORUM_SUCCESS":return Object(u.a)({},e,{isLoading:!1,name:t.name,slug:t.slug,description:t.description,threads:t.threads,error:null});case"FETCH_FORUM_FAILURE":return Object(u.a)({},e,{error:t.error});case"CREATE_THREAD_REQUEST":return Object(u.a)({},e,{newThreadLoading:!0,newThreadSuccess:!1,newThreadError:null,newThreadName:t.newThread.name,newThreadContent:t.newThread.content});case"CREATE_THREAD_SUCCESS":return Object(u.a)({},e,{newThreadLoading:!1,newThreadSuccess:!0,newThreadName:"",newThreadContent:"",newThreadId:t.newThread.id,newThreadShow:!1,newThreadError:null});case"CREATE_THREAD_FAILURE":return Object(u.a)({},e,{newThreadLoading:!1,newThreadSuccess:!1,newThreadId:null,newThreadShow:!0,newThreadError:t.error});case"CREATE_THREAD_SAVE":return Object(u.a)({},e,{newThreadName:t.name,newThreadContent:t.content});case"CREATE_THREAD_TOGGLE":return Object(u.a)({},e,{newThreadShow:!e.newThreadShow,newThreadSuccess:!1,newThreadError:null});case"LOGOUT":return Object(u.a)({},e,{},P);default:return e}};const A=Object(u.a)({},{isLoading:!1,name:null,content:null,pinned:!1,creator:null,createdt:null,posts:[],error:null},{},{newPostSuccess:!1,newPostLoading:!1,newPostError:null},{},{deletePostList:[]},{},{isDeleting:!1,deleteError:null});var U=(e=A,t)=>{switch(t.type){case"FETCH_THREAD_REQUEST":return Object(u.a)({},A,{isLoading:!0,error:null});case"FETCH_THREAD_SUCCESS":return Object(u.a)({},e,{isLoading:!1,name:t.thread.name,content:t.thread.content,pinned:t.thread.pinned,creator:t.thread.creator,createdAt:t.thread.created_at,posts:t.thread.posts,error:null});case"FETCH_THREAD_FAILURE":return Object(u.a)({},e,{isLoading:!1,error:t.error});case"DELETE_THREAD_REQUEST":return Object(u.a)({},e,{isDeleting:!0,deleteError:null});case"DELETE_THREAD_SUCCESS":return Object(u.a)({},e,{isDeleting:!1,deleteError:null});case"DELETE_THREAD_FAILURE":return Object(u.a)({},e,{isDeleting:!1,deleteError:t.error});case"CREATE_POST_REQUEST":return Object(u.a)({},e,{newPostLoading:!0,newPostError:null,newPostSuccess:!1});case"CREATE_POST_SUCCESS":return Object(u.a)({},e,{newPostLoading:!1,newPostError:null,newPostSuccess:!0});case"CREATE_POST_FAILURE":return Object(u.a)({},e,{newPostLoading:!1,newPostError:t.error,newPostSuccess:!1});case"DELETE_POST_REQUEST":return Object(u.a)({},e,{deletePostList:[...e.deletePostList,t.id]});case"DELETE_POST_SUCCESS":case"DELETE_POST_FAILURE":return Object(u.a)({},e,{deletePostList:e.deletePostList.filter(e=>e!==t.id)});default:return e}};var F=Object(h.c)({auth:S,modal:C,register:T,userProfile:L,home:y,users:R,forum:I,thread:U}),D=a(250),k=a(173),x=a(251),M=a.n(x),j=a(252),H=a.n(j);const G=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||h.d,W={key:"root",storage:H.a,stateReconciler:M.a},Q=Object(k.a)(W,F),z=Object(h.e)(Q,G(Object(h.a)(D.a))),B=Object(k.b)(z);var V=z,J=a(253),q=a.n(J);a(300);var K=()=>n.a.createElement("div",{className:"logoContainer"},n.a.createElement("img",{src:q.a,className:"logo",alt:"logo"}),n.a.createElement("div",{className:"logoTitle"},"Yi Shen")),Y=a(85);a(301);var X=()=>n.a.createElement("div",{className:"navlinkContainer"},n.a.createElement(K,null),n.a.createElement("div",{className:"link"},n.a.createElement(Y.a,{name:"home",className:"navlinkIcon"}),n.a.createElement(l.b,{to:"/"},"Home")),n.a.createElement("div",{className:"link"},n.a.createElement(Y.a,{name:"github",className:"navlinkIcon"}),n.a.createElement("a",{href:"https://github.com/wornbb/resume"},"GitHub")));a(379);class $ extends r.Component{render(){let e=this.props.className||"btn",t=this.props.disabled;return this.props.loading&&(t=!0),n.a.createElement("button",{className:e,disabled:t,onClick:this.props.onClick,type:this.props.type?this.props.type:this.props.onClick?"button":"submit"},this.props.loading?n.a.createElement(m,null):this.props.children)}}$.defaultProps={className:"btn",type:"submit",loading:!1,disabled:!1,onClick:null};a(205);class Z extends r.Component{render(){const e=this.props,t=e.showLogin,a=e.showRegister;return n.a.createElement("div",{className:"guestMenu"},n.a.createElement($,{className:"btn-sign-in",type:"button",onClick:t},"Login"),n.a.createElement("br",null),n.a.createElement($,{className:"btn-register",type:"button",onClick:a},"Register"))}}var ee=Z,te=a(274);a(380);var ae=e=>{let t=e.className,a=e.avatar,r=e.centered,s=e.link;a=a||"https://i.imgur.com/7o5cwt8.png",/^http/.test(a)&&!/^https/.test(a)&&(a=a.replace(/^http/,"https")),r=null===r||r,t=t||"avatar";const o=n.a.createElement(te.a,{className:t,src:a,centered:r});return s?n.a.createElement(l.b,{to:s},o):o},re=a(605),ne=a(601);class se extends r.Component{render(){const e=this.props,t=e.username,a=e.avatar,r=e.logout,s=e.showEditProfile,o=e.history,i=e.name;return n.a.createElement("div",{className:"userMenu"},n.a.createElement(re.a,{fluid:!0,inverted:!0,borderless:!0,size:"large",className:"userMenu-menu"},n.a.createElement(re.a.Item,{disabled:!0,className:"userMenu-avatar"},n.a.createElement(ae,{avatar:a})),n.a.createElement(ne.a,{item:!0,simple:!0,text:i||t,direction:"left"},n.a.createElement(ne.a.Menu,null,n.a.createElement(ne.a.Item,{onClick:()=>{o.push("/user/".concat(t))},icon:"user",text:"My profile"}),n.a.createElement(ne.a.Item,{onClick:s,icon:"setting",text:"Edit profile"}),n.a.createElement(ne.a.Item,{onClick:r,icon:"sign out",text:"Logout"})))))}}var oe=Object(c.f)(se);class ie extends r.Component{render(){const e=this.props,t=e.isAuthenticated,a=e.username,r=e.name,s=e.avatar,o=e.logout,i=e.isLoading,l=e.showRegister,c=e.showLogin,d=e.showEditProfile;return t?n.a.createElement(oe,{username:a,name:r,avatar:s,logout:o,showEditProfile:d,isLoading:i}):n.a.createElement(ee,{showRegister:l,showLogin:c})}}var le=ie,ce=(a(428),a(22)),de=a.n(ce);const me="https://yishen.me/api/",he=me+"user/",ue=me+"forum/",Ee=me+"thread/",pe=me+"post/",ge=()=>{if(V.getState().auth.isAuthenticated){return{headers:{Authorization:"Token "+V.getState().auth.token}}}return null},Se=e=>de.a.get(ue+e,ge()),fe=e=>de.a.get(Ee+e,ge()),Ce=(e,t=!0)=>{const a=new FormData;a.append("file",e);const r=t?"dfnrvqvx":"nlczu2np";return a.append("upload_preset",r),de.a.post("https://api.cloudinary.com/v1_1/rengorum/upload",a,null)},we=(e,t)=>({type:"SHOW_MODAL",modalType:e,modalProps:t}),Te=e=>{try{if(!e.response)return"Error: Network Error";if(e.response.data){const t=e.response.data;if(t.detail)return"Invalid token."===t.detail?"Invalid Token. Please re-login.":t.detail;if(t[0])return t[0];const a=Object.keys(t)[0],r=t[a][0];if(["non_field_errors","detail"].indexOf(a)>=0)return r;const n=String(a).replace("_"," ");return n.charAt(0).toUpperCase()+n.substring(1)+": "+r}}catch(e){return console.log(e),"Something wrong happened. Please report this."}},ve=(e,t)=>a=>{a(Le()),((e,t)=>de.a.post("https://yishen.me/api/user/login/",{username:e,password:t},ge()))(e,t).then(e=>{a(be(e.data)),a({type:"HIDE_MODAL"})}).catch(e=>{const t=Te(e);a(ye(t))})},Le=()=>({type:"LOGIN_REQUEST"}),be=e=>({type:"LOGIN_SUCCESS",token:e.token,username:e.username,name:e.name,avatar:e.avatar,isStaff:e.is_staff}),ye=e=>({type:"LOGIN_FAILURE",error:e}),_e=()=>e=>{de.a.post("https://yishen.me/api/user/logout/",null,ge()),e({type:"LOGOUT"})},Re=e=>t=>{t(Ne());const a=V.getState().auth.username;a?((e,t)=>de.a.put(he+e+"/edit/",t,ge()))(a,e).then(a=>{t(Pe(e))}).catch(e=>{const a=Te(e);t(Oe(a))}):t(Oe("Not authenticated"))},Ne=()=>({type:"EDIT_PROFILE_REQUEST"}),Pe=e=>({type:"EDIT_PROFILE_SUCCESS",avatar:e.avatar,name:e.name}),Oe=e=>({type:"EDIT_PROFILE_FAILURE",error:e}),Ie=e=>t=>{t(Ae()),(e=>de.a.post("https://yishen.me/api/user/register/",e,ge()))(e).then(a=>{t(Ue()),t(ve(e.username,e.password))}).catch(e=>{const a=Te(e);t(Fe(a))})},Ae=()=>({type:"REGISTER_REQUEST"}),Ue=()=>({type:"REGISTER_SUCCESS"}),Fe=e=>({type:"REGISTER_FAILURE",error:e}),De=e=>t=>{t(ke()),(e=>de.a.get(he+e,ge()))(e).then(e=>{t(xe(e.data))}).catch(e=>{const a=Te(e);t(Me(a))})},ke=()=>({type:"FETCH_USER_PROFILE_REQUEST"}),xe=e=>({type:"FETCH_USER_PROFILE_SUCCESS",profile:e}),Me=e=>({type:"FETCH_USER_PROFILE_FAILURE",error:e}),je=()=>e=>{e(He()),de.a.get(he,ge()).then(t=>{e(Ge(t.data))}).catch(t=>{const a=Te(t);e(We(a))})},He=()=>({type:"FETCH_USERS_REQUEST"}),Ge=e=>({type:"FETCH_USERS_SUCCESS",users:e}),We=e=>({type:"FETCH_USERS_FAILURE",error:e}),Qe=()=>({type:"FETCH_FORUM_REQUEST"}),ze=e=>({type:"FETCH_FORUM_SUCCESS",name:e.name,slug:e.slug,description:e.description,threads:e.threads}),Be=e=>({type:"FETCH_FORUM_FAILURE",error:e}),Ve=()=>({type:"FETCH_THREAD_REQUEST"}),Je=e=>({type:"FETCH_THREAD_SUCCESS",thread:e}),qe=e=>({type:"FETCH_THREAD_FAILURE",error:e}),Ke=e=>t=>{t(Ye(e)),(e=>de.a.post("https://yishen.me/api/thread/create/",e,ge()))(e).then(a=>{t(Xe(a.data)),Se(e.forum).then(e=>{t(ze(e.data))}).catch(e=>{const a=Te(e);t(Be(a))})}).catch(e=>{const a=Te(e);t($e(a))})},Ye=e=>({type:"CREATE_THREAD_REQUEST",newThread:e}),Xe=e=>({type:"CREATE_THREAD_SUCCESS",newThread:e}),$e=e=>({type:"CREATE_THREAD_FAILURE",error:e}),Ze=e=>t=>{t(et()),(e=>de.a.delete(Ee+e+"/delete/",ge()))(e).then(a=>{t(tt()),fe(e).then(e=>{t(Je(e.data))}).catch(e=>{const a=Te(e);t(qe(a))})}).catch(e=>{const a=Te(e);t(at(a))})},et=()=>({type:"DELETE_THREAD_REQUEST"}),tt=()=>({type:"DELETE_THREAD_SUCCESS"}),at=e=>({type:"DELETE_THREAD_FAILURE",error:e}),rt=e=>t=>{t(nt()),(e=>de.a.post("https://yishen.me/api/post/create/",e,ge()))(e).then(a=>{t(st()),fe(e.thread_id).then(e=>{t(Je(e.data))}).catch(e=>{const a=Te(e);t(qe(a))})}).catch(e=>{const a=Te(e);t(ot(a))})},nt=e=>({type:"CREATE_POST_REQUEST"}),st=()=>({type:"CREATE_POST_SUCCESS"}),ot=e=>({type:"CREATE_POST_FAILURE",error:e}),it=(e,t)=>a=>{a(lt(e)),(e=>de.a.delete(pe+e+"/delete/",ge()))(e).then(r=>{a(ct(e)),fe(t).then(e=>{a(Je(e.data))}).catch(e=>{const t=Te(e);a(qe(t))})}).catch(t=>{const r=Te(t);a(dt(e,r))})},lt=e=>({type:"DELETE_POST_REQUEST",id:e}),ct=e=>({type:"DELETE_POST_SUCCESS",id:e}),dt=(e,t)=>({type:"DELETE_POST_FAILURE",id:e,error:t});class mt extends r.Component{render(){const e=this.props,t=e.isAuthenticated,a=e.username,r=e.name,s=e.avatar,o=e.handleLogout,i=e.isLoading,l=e.showRegister,c=e.showLogin,d=e.showEditProfile;return n.a.createElement("div",{className:"headerContainer"},n.a.createElement(X,null),n.a.createElement(le,{isAuthenticated:t,username:a,name:r,avatar:s,logout:o,isLoading:i,showRegister:l,showLogin:c,showEditProfile:d}))}}var ht=Object(i.b)(e=>({username:e.auth.username,name:e.auth.name,avatar:e.auth.avatar,isAuthenticated:e.auth.isAuthenticated,isLoading:e.auth.isLoading}),e=>({handleLogout:()=>{e(_e())},showRegister:()=>{e(we("REGISTER",{}))},showLogin:()=>{e(we("LOGIN",{}))},showEditProfile:()=>{e(we("EDIT_PROFILE",{}))}}))(mt),ut=a(603),Et=a(600),pt=a(604);a(446);class gt extends r.Component{render(){const e=this.props,t=e.loading,a=e.loadingClassName,r=e.loadingMessage,s=e.error,o=e.errorClassName,i=e.errorMessage,l=e.success,c=e.successClassName,d=e.successMessage,h=e.nothing,u=e.nothingClassName,E=e.nothingMessage,p=e.type;return t?"modal"===p?n.a.createElement("div",{className:a||"statusMessage-modal"},n.a.createElement(ut.a,{attached:!0,icon:!0},n.a.createElement(ut.a.Content,null,n.a.createElement(Y.a,{name:"circle notched",loading:!0,size:"big"}),r||"Loading ..."))):n.a.createElement("div",{className:a||"statusMessage-default"},n.a.createElement(m,null),n.a.createElement("br",null),n.a.createElement(ut.a,{size:"tiny"},n.a.createElement(ut.a.Content,null,n.a.createElement(ut.a.Header,null,"Just few seconds"),r||"We are fetching the content for you."))):s?"modal"===p?n.a.createElement("div",{className:o||"statusMessage-modal"},n.a.createElement(ut.a,{attached:!0,error:!0,icon:!0},n.a.createElement(ut.a.Content,null,n.a.createElement(Y.a,{name:"thumbs outline down",size:"big"}),i||s||"Sorry, something went wrong"))):n.a.createElement("div",{className:o||"statusMessage-default"},n.a.createElement(ut.a,{error:!0},n.a.createElement(ut.a.Content,null,n.a.createElement(Y.a,{name:"thumbs outline down",size:"big"}),i||s||"Sorry, something went wrong"))):l?"modal"===p?n.a.createElement("div",{className:c||"statusMessage-modal"},n.a.createElement(ut.a,{attached:!0,positive:!0,icon:!0},n.a.createElement(ut.a.Content,null,n.a.createElement(Y.a,{name:"thumbs outline up",size:"big"}),d||"Successful"))):n.a.createElement("div",{className:c||"statusMessage-default"},n.a.createElement(ut.a,{positive:!0},n.a.createElement(ut.a.Content,null,n.a.createElement(Y.a,{name:"thumbs outline up",size:"big"}),d||"Successful"))):h?"modal"===p?n.a.createElement("div",{className:u||"statusMessage-modal"},n.a.createElement(ut.a,{attached:!0,error:!0,icon:!0},n.a.createElement(ut.a.Content,null,n.a.createElement(Y.a,{name:"thumbs outline down",size:"big"}),E||"Successful"))):n.a.createElement("div",{className:u||"statusMessage-default"},n.a.createElement(ut.a,{error:!0},n.a.createElement(ut.a.Content,null,n.a.createElement(Y.a,{name:"thumbs outline down",size:"big"}),E||"Nothing to display"))):null}}a(447);class St extends r.Component{constructor(e){super(e),this.handleChange=(e,{name:t,value:a})=>{this.setState({[t]:a})},this.handleCheckbox=()=>{this.setState({checked:!this.state.checked})},this.isFormValid=()=>{const e=this.state,t=e.username,a=e.name,r=e.email,n=e.password,s=e.checked;let o=!0;return t&&a&&r&&n&&s||(o=!1),o},this.handleSubmit=e=>{if(this.isFormValid()){let e={username:this.state.username,name:this.state.name,email:this.state.email,password:this.state.password};this.props.handleRegister(e)}},this.state={username:"",name:"",email:"",password:"",checked:!0}}render(){let e=this.props,t=e.isLoading,a=e.error,r=e.showLogin;const s=n.a.createElement(gt,{error:a,errorMessage:a||"Login Error",loading:t,loadingMessage:"Registering your account",type:"modal"});return n.a.createElement("div",null,n.a.createElement(ut.a,{attached:!0,header:"Welcome to our site!",content:"Fill out the form below to sign-up for a new account"}),s,n.a.createElement(Et.a,{className:"attached fluid segment"},n.a.createElement(Et.a.Input,{required:!0,label:"Username",placeholder:"Username",type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),n.a.createElement(Et.a.Input,{required:!0,label:"Name",placeholder:"Name",type:"text",name:"name",value:this.state.name,onChange:this.handleChange}),n.a.createElement(Et.a.Input,{required:!0,label:"Email",placeholder:"Email",type:"email",name:"email",value:this.state.email,onChange:this.handleChange}),n.a.createElement(Et.a.Input,{required:!0,label:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}),n.a.createElement(Et.a.Checkbox,{inline:!0,required:!0,label:"I agree to the terms and conditions",name:"agreement",checked:this.state.checked,onChange:this.handleCheckbox}),n.a.createElement(pt.a,{color:"blue",loading:t,disabled:t,onClick:this.handleSubmit},"Submit")),n.a.createElement(ut.a,{attached:"bottom",warning:!0},n.a.createElement(Y.a,{name:"help"}),"Already signed up?\xa0",n.a.createElement("a",{className:"register-login",onClick:r},"Login here"),"\xa0instead."))}}a(451);class ft extends r.Component{constructor(...e){super(...e),this.listenKeyboard=e=>{"Escape"!==e.key&&27!==e.keyCode||this.props.onClose()},this.closeModal=()=>{this.props.onClose()},this.onDialogClick=e=>{e.stopPropagation()}}componentDidMount(){this.props.onClose&&window.addEventListener("keydown",this.listenKeyboard,!0)}componentWillUnmount(){this.props.onClose&&window.removeEventListener("keydown",this.listenKeyboard,!0)}render(){const e=this.props.overlayStyle?this.props.overlayStyle:{},t=this.props.contentStyle?this.props.contentStyle:{},a=this.props.dialogStyle?this.props.dialogStyle:{};return n.a.createElement("div",null,n.a.createElement("div",{className:"modal-overlay-div",style:e}),n.a.createElement("div",{className:"modal-content-div",style:t,onClick:this.closeModal},n.a.createElement("div",{className:"modal-dialog-div",style:a,onClick:this.onDialogClick},n.a.createElement(Y.a,{name:"window close outline",size:"large",className:"modal-close-div",onClick:this.closeModal}),this.props.children)))}}class Ct extends r.Component{componentWillMount(){this.props.isAuthenticated&&this.props.handleClose()}render(){const e=this.props,t=e.isAuthenticated,a=e.isLoading,r=e.error,s=e.handleRegister,o=e.showLogin,i=e.handleClose;return t?null:n.a.createElement(ft,{onClose:i},n.a.createElement(St,{handleRegister:s,showLogin:o,isLoading:a,error:r}))}}var wt=Object(i.b)(e=>({isAuthenticated:e.auth.isAuthenticated,error:e.register.error,isLoading:e.register.isLoading}),e=>({handleRegister:t=>{e(Ie(t))},handleClose:()=>{e({type:"HIDE_MODAL"}),e({type:"REGISTER_RESET"})},showLogin:()=>{e(we("LOGIN",{})),e({type:"REGISTER_RESET"})}}))(Ct);a(452);class Tt extends r.Component{constructor(e){super(e),this.handleChange=(e,{name:t,value:a})=>{this.setState({[t]:a})},this.isFormValid=()=>{const e=this.state,t=e.username,a=e.password;let r=!0;return t&&a||(r=!1),r},this.handleSubmit=e=>{this.isFormValid()&&this.props.handleLogin(this.state.username,this.state.password)},this.state={username:"",password:""}}render(){let e=this.props,t=e.isLoading,a=e.error,r=e.showRegister;const s=n.a.createElement(gt,{error:a,errorMessage:a||"Login Error",loading:t,loadingMessage:"Signing in",type:"modal"});return n.a.createElement("div",null,n.a.createElement(ut.a,{attached:!0,header:"Login"}),s,n.a.createElement(Et.a,{className:"attached fluid segment"},n.a.createElement(Et.a.Input,{required:!0,label:"Username",placeholder:"Username",type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),n.a.createElement(Et.a.Input,{required:!0,label:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}),n.a.createElement(pt.a,{color:"blue",loading:t,disabled:t,onClick:this.handleSubmit},"Login")),n.a.createElement(ut.a,{attached:"bottom",warning:!0},n.a.createElement(Y.a,{name:"help"}),"New to this site?\xa0",n.a.createElement("a",{className:"login-register",onClick:r},"Register here"),"\xa0instead."))}}class vt extends r.Component{componentWillMount(){this.props.isAuthenticated&&this.props.handleClose()}render(){const e=this.props,t=e.isAuthenticated,a=e.isLoading,r=e.error,s=e.handleClose,o=e.showRegister,i=e.handleLogin;return t?null:n.a.createElement(ft,{onClose:s},n.a.createElement(Tt,{handleLogin:i,showRegister:o,isLoading:a,error:r}))}}var Lt=Object(i.b)(e=>({isLoading:e.auth.isLoading,error:e.auth.error,isAuthenticated:e.auth.isAuthenticated}),e=>({handleLogin:(t,a)=>{e(ve(t,a))},handleClose:()=>{e({type:"HIDE_MODAL"}),e({type:"LOGIN_RESET"})},showRegister:()=>{e(we("REGISTER",{})),e({type:"LOGIN_RESET"})}}))(vt),bt=a(275),yt=a(606),_t=a(598);a(453);class Rt extends r.Component{constructor(e){super(e),this.handleChange=(e,{name:t,value:a})=>{this.setState({[t]:a})},this.onImageDrop=e=>{this.setState({avatarFile:e[0]})},this.editProfile=()=>{let e={name:this.state.name,current_password:this.state.currentPassword,new_password:this.state.newPassword,bio:this.state.bio,avatar:this.state.avatar,status:this.state.status};this.props.handleEdit(e),this.setState({currentPassword:""})},this.handleSubmit=()=>{const e=this.state,t=e.currentPassword,a=e.avatarFile;""!==t&&(a?(this.setState({avatarUploading:!0}),Ce(a).then(e=>{this.setState({avatar:e.data.secure_url,avatarUploading:!1}),this.editProfile()}).catch(e=>{console.log(e),this.setState({avatarError:"Image Upload Error",avatarFile:null,avatarUploading:!1})})):this.editProfile())};const t=this.props,a=t.name,r=t.avatar;this.state={name:a,newPassword:"",currentPassword:"",bio:"",status:"",avatar:r,avatarFile:null,avatarError:null,avatarUploading:!1}}render(){let e=this.props,t=e.isLoading,a=e.error,r=e.success,s=this.state,o=s.name,i=s.newPassword,l=s.currentPassword,c=s.bio,d=s.status,m=s.avatar,h=s.avatarFile,u=s.avatarError,E=s.avatarUploading;const p=n.a.createElement(gt,{error:a||u,errorMessage:a||u,loading:t||E,loadingMessage:"Editing your profile",success:r,successMessage:"Your profile edit was successful",type:"modal"}),g=h?h.preview:m;return n.a.createElement("div",null,n.a.createElement(ut.a,{attached:!0,header:"Edit Your Profile",content:"Fill out any part of the form below to edit your profile"}),p,n.a.createElement(Et.a,{className:"attached segment"},n.a.createElement(yt.a,{celled:!0,columns:2},n.a.createElement(yt.a.Column,null,n.a.createElement(Et.a.Field,null,n.a.createElement("label",null,"Profile picture"),n.a.createElement(bt.a,{onDrop:this.onImageDrop,multiple:!1,accept:"image/*"},n.a.createElement(te.a,{src:g,className:"editProfile-avatar"}))),n.a.createElement(Et.a.Input,{label:"Bio",placeholder:"Describe yourself",type:"text",name:"bio",control:_t.a,value:c,onChange:this.handleChange})),n.a.createElement(yt.a.Column,null,n.a.createElement(Et.a.Input,{label:"Name",placeholder:"Name",type:"text",name:"name",value:o,onChange:this.handleChange}),n.a.createElement(Et.a.Input,{required:!0,label:"Current Password",type:"password",name:"currentPassword",value:l,onChange:this.handleChange}),n.a.createElement(Et.a.Input,{label:"New Password",type:"password",name:"newPassword",value:i,onChange:this.handleChange}),n.a.createElement(Et.a.Input,{label:"Status",placeholder:"Who are you (e.g: Writer)",type:"text",name:"status",value:d,onChange:this.handleChange}))),n.a.createElement(pt.a,{color:"blue",loading:t,disabled:t,onClick:this.handleSubmit},"Submit")))}}class Nt extends r.Component{componentWillMount(){this.props.isAuthenticated||this.props.handleClose()}render(){const e=this.props,t=e.isAuthenticated,a=e.isEditing,r=e.error,s=e.avatar,o=e.name,i=e.editProfile,l=e.handleClose,c=e.success;return t?n.a.createElement(ft,{onClose:l,dialogStyle:{minWidth:"500px"}},n.a.createElement(Rt,{avatar:s,name:o,handleEdit:i,isLoading:a,error:r,success:c})):null}}var Pt=Object(i.b)(e=>({isAuthenticated:e.auth.isAuthenticated,isEditing:e.auth.isEditing,error:e.auth.editError,avatar:e.auth.avatar,name:e.auth.name,success:e.auth.editSuccess}),e=>({editProfile:t=>{e(Re(t))},handleClose:()=>{e({type:"HIDE_MODAL"}),e({type:"EDIT_PROFILE_RESET"})}}))(Nt);var Ot=Object(i.b)(e=>({modalType:e.modal.modalType,modalProps:e.modal.modalProps}))(e=>{switch(e.modalType){case"REGISTER":return n.a.createElement(wt,null);case"LOGIN":return n.a.createElement(Lt,null);case"EDIT_PROFILE":return n.a.createElement(Pt,null);default:return null}});a(454);class It extends r.Component{formatDateTime(e){return e.split(".")[0].replace("T"," ")}render(){const e=this.props,t=e.name,a=e.username,r=e.avatar,s=e.bio,o=e.status,i=e.isStaff,l=e.dateJoined;return n.a.createElement("div",{className:"profileContainer"},n.a.createElement("div",null,n.a.createElement(ae,{className:"profileAvatar",avatar:r,centered:!1})),n.a.createElement("div",{className:"profileInfo"},n.a.createElement("div",{className:"name"},t),n.a.createElement("div",{className:"username"},n.a.createElement("strong",null,"@",a),n.a.createElement("b",{className:"staffStatus"},i?" (Staff) ":"")),n.a.createElement("div",{className:"status"},n.a.createElement("strong",null,"Status: "),o),n.a.createElement("div",{className:"dateJoined"},n.a.createElement("strong",null,"Joined: "),l),n.a.createElement("div",{className:"bio"},n.a.createElement("strong",null,"Bio: "),s)))}}var At=It;a(455);class Ut extends r.Component{componentDidMount(){const e=this.props.match.params.username;this.props.fetchUserProfile(e)}componentWillReceiveProps(e){const t=this.props.match.params.username,a=e.match.params.username;t!==a&&this.props.fetchUserProfile(a)}render(){const e=this.props,t=e.isLoading,a=e.error,r=e.profile;if(a||!r||t)return n.a.createElement(gt,{error:a||!r,errorClassName:"userProfile-error",errorMessage:a,loading:t,loadingMessage:"We are fetching the user profile for you",type:"default"});const s=r.name,o=r.username,i=r.status,l=r.bio,c=r.avatar,d=r.is_staff,m=r.date_joined;return n.a.createElement(At,{username:o,name:s,avatar:c,status:i,bio:l,dateJoined:m,isStaff:d})}}var Ft=Object(i.b)(e=>({isLoading:e.userProfile.isLoading,profile:e.userProfile.profile,error:e.userProfile.error}),e=>({fetchUserProfile:t=>{e(De(t))}}))(Ut),Dt=a(602);a(456);class kt extends r.Component{render(){const e=this.props,t=e.name,a=e.username,r=e.isStaff,s=e.avatar;return n.a.createElement(Dt.a,null,n.a.createElement(ae,{className:"userCard-avatar",avatar:s,link:"/user/".concat(a)}),n.a.createElement(Dt.a.Content,null,n.a.createElement(Dt.a.Header,null,t),n.a.createElement(Dt.a.Meta,null,n.a.createElement(l.b,{to:"/user/".concat(a)},"@",a),n.a.createElement("b",{style:{color:"red",fontSize:"12px"}},r?" (Staff) ":""))))}}var xt=kt;a(457);class Mt extends r.Component{render(){const e=this.props,t=e.isLoading,a=e.error,r=e.users;if(a||!r||t||0===r.length)return n.a.createElement(gt,{error:a||!r,errorClassName:"users-error",errorMessage:a,loading:t,loadingMessage:"We are fetching the users for you",nothing:r&&0===r.length,nothingMessage:"No user to display",nothingClassName:"users-error",type:"default"});const s=r.map(e=>{const t=e.name,a=e.username,r=e.avatar,s=e.is_staff;return n.a.createElement("div",{key:a,className:"userCard"},n.a.createElement(xt,{username:a,name:t,avatar:r,isStaff:s}))});return n.a.createElement("div",{className:"usersContainer"},s)}}class jt extends r.Component{componentDidMount(){this.props.fetchUsers()}render(){return n.a.createElement(Mt,this.props)}}Object(i.b)(e=>({isLoading:e.users.isLoading,users:e.users.users,error:e.users.error}),e=>({fetchUsers:()=>{e(je())}}))(jt);var Ht=a(607),Gt=a(16),Wt=(a(546),a(547),a(272));class Qt extends r.Component{constructor(e){super(e),this.convertToEditorState=e=>{let t=Gt.EditorState.createEmpty();if(e)try{const a=Object(Gt.convertFromRaw)(JSON.parse(e));t=Gt.EditorState.createWithContent(a)}catch(a){const r=Gt.ContentState.createFromText(e);t=Gt.EditorState.createWithContent(r)}return t},this.onEditorStateChange=e=>{this.setState({editorState:e})},this.uploadImageCallBack=e=>new Promise((t,a)=>{Ce(e,!1).then(e=>{let a={data:{link:e.data.secure_url}};t(a)}).catch(e=>{a(e)})});let t=this.props,a=t.content,r=t.editorState;r=r||this.convertToEditorState(a),this.state={editorState:r}}componentWillReceiveProps(e){const t=e.editorState,a=e.content,r=t||this.convertToEditorState(a);this.setState({editorState:r})}render(){const e=this.props,t=e.readOnly,a=e.wrapperClassName,r=e.toolbarClassName,s=e.editorClassName,o=e.handleBeforeInput,i=e.handlePastedText,l=e.onEditorStateChange,c=e.editorState,d=e.uploadImageCallBack,m=e.placeholder;return n.a.createElement(Wt.Editor,{toolbar:{options:["inline","blockType","fontSize","fontFamily","list","textAlign","colorPicker","link","emoji","image","history"],inline:{inDropdown:!0},list:{inDropdown:!0},textAlign:{inDropdown:!0},link:{inDropdown:!0},image:{uploadCallback:d||this.uploadImageCallBack,alt:{present:!0},previewImage:!0},fontFamily:{options:["Arial","Georgia","Impact","Tahoma","Roboto","Times New Roman","Verdana"]}},editorState:c||this.state.editorState,wrapperClassName:a||"richEditor-wrapper",toolbarClassName:r||"richEditor-toolbar",editorClassName:s||"richEditor-editor",onEditorStateChange:l||this.onEditorStateChange,readOnly:t,toolbarHidden:t,handleBeforeInput:o,handlePastedText:i,placeholder:m})}}a(548);class zt extends r.Component{constructor(...e){super(...e),this.onDelete=()=>{const e=this.props,t=e.deleteAction,a=e.id,r=e.threadID;e.isThread?t(r):t(a,r)}}render(){const e=this.props,t=e.id,a=e.isThread,r=e.content,s=e.createdAt,o=e.creator,i=e.authenticatedUsername,c=e.authenticatedIsStaff,d=e.deletePostList,m=a?"black":null,h=a?"Delete Thread":"Delete Post",u=n.a.createElement("div",{className:"post-dropdown"},n.a.createElement(ne.a,{simple:!0,icon:"caret down",direction:"left"},n.a.createElement(ne.a.Menu,null,n.a.createElement(ne.a.Item,{onClick:this.onDelete,icon:"delete",text:h})))),E=!a&&d.indexOf(t)>=0;return n.a.createElement(Ht.a,{loading:E,color:m},n.a.createElement(yt.a,{textAlign:"left",padded:"horizontally"},n.a.createElement(yt.a.Column,{width:4},n.a.createElement(yt.a.Row,null,n.a.createElement("div",{className:"post-row"},n.a.createElement(ae,{className:"post-avatar",avatar:o.avatar,centered:!1,link:"/user/".concat(o.username)}),n.a.createElement("div",{className:"post-column"},n.a.createElement("div",{className:"post-name"},o.name),n.a.createElement("div",{className:"post-username"},n.a.createElement(l.b,{to:"/user/".concat(o.username)},n.a.createElement(Y.a,{name:"user"}),o.username)),n.a.createElement("div",{className:"post-status"},o.status||"Member"))))),n.a.createElement(yt.a.Column,{width:12},n.a.createElement("div",{className:"post-time"},s,(c||i===o.username)&&u),n.a.createElement(Qt,{readOnly:!0,content:r,wrapperClassName:"post-wrapper-read",editorClassName:"post-editor",toolbarClassName:"post-toolbar"}))))}}var Bt=a(127),Vt=a(128),Jt=a.n(Vt),qt=a(68);a(549);class Kt extends r.Component{constructor(e){super(e),this.onEditorStateChange=e=>{this.setState({editorState:e})},this.onSubmit=()=>{const e=this.state.editorState,t=this.props,a=t.threadID;(0,t.createPost)({thread_id:a,content:JSON.stringify(Object(Gt.convertToRaw)(e.getCurrentContent()))})},this.isValidLength=e=>{const t=this.props.maxLength||1e3;return e.getPlainText("").length<=t},this.handleBeforeInput=e=>{const t=this.state.editorState;if(!this.isValidLength(t.getCurrentContent()))return"handled"},this.handlePastedText=(e,t,a,r)=>{if(t){const e=Jt()(t);let n=a.getCurrentContent();return e.entityMap.forEach((e,t)=>{n=n.mergeEntityData(t,e)}),n=Gt.Modifier.replaceWithFragment(n,a.getSelection(),new qt.List(e.contentBlocks)),this.isValidLength(n)?(r(Gt.EditorState.push(a,n,"insert-characters")),!0):"handled"}const n=Object(Bt.getSelectedBlock)(a),s=Gt.Modifier.replaceText(a.getCurrentContent(),a.getSelection(),e,a.getCurrentInlineStyle());return this.isValidLength(s)?(r(Gt.EditorState.push(a,s,"insert-characters")),!(!n||"code"!==n.type)):"handled"},this.state={editorState:Gt.EditorState.createEmpty()}}componentWillReceiveProps(e){e.success&&this.setState({editorState:Gt.EditorState.createEmpty()})}render(){const e=this.props,t=e.isAuthenticated,a=e.isLoading,r=e.error;if(!t)return n.a.createElement("div",{className:"newPost-none"},"Please sign in to post a reply");const s=this.state.editorState,o=n.a.createElement(gt,{error:r,errorClassName:"newPost-message",errorMessage:r||"Oops! Something went wrong.",type:"modal"});return n.a.createElement("div",{className:"newPost-show"},o,n.a.createElement(Et.a,{loading:a,className:"attached fluid segment"},n.a.createElement(Qt,{placeholder:"Start typing your post content here...",editorState:s,wrapperClassName:"newPost-wrapper",toolbarClassName:"newPost-toolbar",editorClassName:"newPost-editor",onEditorStateChange:this.onEditorStateChange,handleBeforeInput:this.handleBeforeInput,handlePastedText:this.handlePastedText}),n.a.createElement(pt.a,{color:"blue",size:"small",loading:a,disabled:a,onClick:this.onSubmit},n.a.createElement(Y.a,{name:"write"}),"Post")))}}a(550);class Yt extends r.Component{render(){const e=this.props,t=e.id,a=e.isLoading,r=e.name,s=e.content,o=e.pinned,i=e.creator,l=e.createdAt,c=e.posts,d=e.error,m=e.isAuthenticated,h=e.createPost,u=e.newPostSuccess,E=e.newPostLoading,p=e.newPostError,g=e.authenticatedUsername,S=e.authenticatedIsStaff,f=e.deletePostList,C=e.deletePost,w=e.isDeleting,T=e.deleteError,v=e.deleteThread;if(d||T||a||w||!r){let e="We are fetching the thread for you";return w&&(e="We are deleting the thread for you"),n.a.createElement(gt,{error:d||T||!r,errorClassName:"thread-error",errorMessage:d||T,loading:a||w,loadingMessage:e,nothing:!r,nothingMessage:"Thread does not exist",type:"default"})}const L=n.a.createElement(zt,{id:t,threadID:t,isThread:!0,content:s,createdAt:l,creator:i,authenticatedUsername:g,authenticatedIsStaff:S,deleteAction:v}),b=0===c.length?null:c.map(e=>{const a=e.id,r=e.content,s=e.created_at,o=e.creator;return n.a.createElement(zt,{key:a,threadID:t,id:a,isThread:!1,content:r,createdAt:s,creator:o,authenticatedUsername:g,authenticatedIsStaff:S,deletePostList:f,deleteAction:C})});return n.a.createElement("div",{className:"threadContainer"},n.a.createElement("div",{className:"thread-title"},n.a.createElement(Y.a,{name:o?"pin":"talk outline"}),r),n.a.createElement(Ht.a.Group,{className:"thread-list"},L,b),n.a.createElement(Kt,{isAuthenticated:m,threadID:t,createPost:h,success:u,isLoading:E,error:p,maxLength:2e3}))}}class Xt extends r.Component{componentDidMount(){const e=this.props.match.params.thread;this.props.fetchThread(e)}componentWillReceiveProps(e){const t=this.props.match.params.thread,a=e.match.params.thread;t!==a&&this.props.fetchThread(a)}render(){const e=this.props.match.params.thread,t=this.props,a=t.isLoading,r=t.name,s=t.content,o=t.pinned,i=t.creator,l=t.createdAt,c=t.posts,d=t.error,m=t.isAuthenticated,h=t.createPost,u=t.newPostLoading,E=t.newPostError,p=t.newPostSuccess,g=t.authenticatedUsername,S=t.authenticatedIsStaff,f=t.deletePostList,C=t.deletePost,w=t.isDeleting,T=t.deleteError,v=t.deleteThread;return n.a.createElement(Yt,{id:e,isLoading:a,name:r,content:s,pinned:o,creator:i,createdAt:l,posts:c,error:d,isAuthenticated:m,createPost:h,newPostSuccess:p,newPostLoading:u,newPostError:E,authenticatedUsername:g,authenticatedIsStaff:S,deletePostList:f,deletePost:C,isDeleting:w,deleteError:T,deleteThread:v})}}Object(i.b)(e=>({isLoading:e.thread.isLoading,name:e.thread.name,content:e.thread.content,pinned:e.thread.pinned,creator:e.thread.creator,createdAt:e.thread.createdAt,posts:e.thread.posts,error:e.thread.error,isAuthenticated:e.auth.isAuthenticated,authenticatedUsername:e.auth.username,authenticatedIsStaff:e.auth.isStaff,newPostSuccess:e.thread.newPostSuccess,newPostLoading:e.thread.newPostLoading,newPostError:e.thread.newPostError,deletePostList:e.thread.deletePostList,isDeleting:e.thread.isDeleting,deleteError:e.thread.deleteError}),e=>({fetchThread:t=>{e((e=>t=>{t(Ve()),fe(e).then(e=>{t(Je(e.data))}).catch(e=>{const a=Te(e);t(qe(a))})})(t))},createPost:t=>{e(rt(t))},deletePost:(t,a)=>{e(it(t,a))},deleteThread:t=>{e(Ze(t))}}))(Xt),a(551);r.Component;var $t=a(98),Zt=a(273),ea=a.n(Zt);$t.pdfjs.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat($t.pdfjs.version,"/pdf.worker.js");class ta extends r.Component{render(){return n.a.createElement($t.Document,{file:ea.a,onLoadSuccess:this.onDocumentLoadSuccess},n.a.createElement($t.Page,{pageNumber:1,height:1500}))}}var aa=Object(i.b)()(ta);a(586);class ra extends r.Component{render(){const e=this.props,t=e.isLoading,a=e.error,r=e.threads;if(a||!r||t||0===r.length)return n.a.createElement(gt,{error:a||!r,errorClassName:"forum-error",errorMessage:a,loading:t,loadingMessage:"We are fetching the forum for you",nothing:r&&0===r.length,nothingMessage:"No threads to display",nothingClassName:"forum-error",type:"default"});const s=r.map(e=>{let t=e.id,a=e.name,r=e.pinned,s=e.creator,o=e.avatar,i=e.naturaltime,c=e.replies_count,d=e.last_activity;a=a.length>57?a.substring(0,55)+"...":a;let m=d?n.a.createElement("div",{className:"forum-row"},n.a.createElement(ae,{className:"forum-avatar",avatar:d.avatar,centered:!1,link:"/user/".concat(d.username)}),n.a.createElement("div",{className:"forum-column"},n.a.createElement("div",{className:"forum-name"},d.name),n.a.createElement("div",{className:"forum-meta"},n.a.createElement(l.b,{to:"/user/".concat(d.username)},n.a.createElement(Y.a,{name:"user"}),d.username),n.a.createElement("b",null,"  \u2014  ".concat(d.naturaltime))))):n.a.createElement("div",{className:"forum-text forum-vertical"},"\u2014  No activity \u2014");return n.a.createElement(Ht.a,{vertical:!0,key:t},n.a.createElement(yt.a,{textAlign:"left",padded:"horizontally"},n.a.createElement(yt.a.Column,{width:7},n.a.createElement(yt.a.Row,null,n.a.createElement("div",{className:"forum-row"},n.a.createElement(ae,{className:"forum-avatar",avatar:o,centered:!1,link:"/user/".concat(s)}),n.a.createElement("div",{className:"forum-column"},n.a.createElement("div",null,n.a.createElement(Y.a,{name:r?"pin":"talk outline"}),n.a.createElement(l.b,{to:"/thread/".concat(t)},a)),n.a.createElement("div",{className:"forum-meta"},n.a.createElement(l.b,{to:"/user/".concat(s)},n.a.createElement(Y.a,{name:"user"}),s),n.a.createElement("b",null,"  \u2014  ".concat(i))))))),n.a.createElement(yt.a.Column,{width:3},n.a.createElement("div",{className:"forum-column forum-stats forum-vertical"},n.a.createElement("div",{style:{paddingBottom:"5px"}},n.a.createElement(Y.a,{name:"comment outline"}),c,c>1?" replies":" reply"))),n.a.createElement(yt.a.Column,{width:6},m)))});return n.a.createElement("div",{className:"forumContainer"},n.a.createElement(Ht.a.Group,{className:"forum-list"},s))}}var na=a(599);a(587);class sa extends r.Component{constructor(e){super(e),this.convertToEditorState=e=>{let t=Gt.EditorState.createEmpty();if(e)try{const a=Object(Gt.convertFromRaw)(JSON.parse(e));t=Gt.EditorState.createWithContent(a)}catch(a){const r=Gt.ContentState.createFromText(e);t=Gt.EditorState.createWithContent(r)}return t},this.toggleShowEditor=()=>{this.props.toggleShowEditor()},this.onSave=()=>{const e=this.state,t=e.name,a=e.editorState,r=JSON.stringify(Object(Gt.convertToRaw)(a.getCurrentContent()));this.props.updateNewThread({name:t,content:r}),this.toggleShowEditor()},this.onCancel=()=>{const e=Gt.EditorState.createEmpty();this.setState({name:"",editorState:e});const t=JSON.stringify(Object(Gt.convertToRaw)(e.getCurrentContent()));this.props.updateNewThread({name:"",content:t}),this.toggleShowEditor()},this.onNameChange=(e,{value:t})=>{this.setState({name:t})},this.onEditorStateChange=e=>{this.setState({editorState:e})},this.isFormValid=()=>this.state.name,this.onSubmit=()=>{if(this.isFormValid()){const e=this.state,t=e.name,a=e.editorState,r=this.props,n=r.forum;(0,r.createThread)({name:t,forum:n,content:JSON.stringify(Object(Gt.convertToRaw)(a.getCurrentContent()))})}},this.isValidLength=e=>{const t=this.props.maxLength||100;return e.getPlainText("").length<=t},this.handleBeforeInput=e=>{const t=this.state.editorState;if(!this.isValidLength(t.getCurrentContent()))return"handled"},this.handlePastedText=(e,t,a,r)=>{if(t){const e=Jt()(t);let n=a.getCurrentContent();return e.entityMap.forEach((e,t)=>{n=n.mergeEntityData(t,e)}),n=Gt.Modifier.replaceWithFragment(n,a.getSelection(),new qt.List(e.contentBlocks)),this.isValidLength(n)?(r(Gt.EditorState.push(a,n,"insert-characters")),!0):"handled"}const n=Object(Bt.getSelectedBlock)(a),s=Gt.Modifier.replaceText(a.getCurrentContent(),a.getSelection(),e,a.getCurrentInlineStyle());return this.isValidLength(s)?(r(Gt.EditorState.push(a,s,"insert-characters")),!(!n||"code"!==n.type)):"handled"};const t=this.props,a=t.name,r=t.content;let n=this.convertToEditorState(r);this.state={name:a,editorState:n}}componentWillReceiveProps(e){const t=e.name,a=e.content,r=this.convertToEditorState(a);this.setState({name:t,editorState:r})}render(){const e=this.props,t=e.isAuthenticated,a=e.isLoading,r=e.success,s=e.id,o=e.error,i=e.showEditor,c=this.state,d=c.name,m=c.editorState;if(!t)return n.a.createElement("div",{className:"newThread-none"});const h=n.a.createElement(gt,{error:o,errorClassName:"newThread-message",errorMessage:o||"Oops! Something went wrong.",success:r,successClassName:"newThread-message",successMessage:n.a.createElement(l.b,{to:"/thread/".concat(s)},"Successful on creating thread"),type:"modal"});return i?n.a.createElement("div",{className:"newThread-show"},h,n.a.createElement(Et.a,{loading:a,className:"attached fluid segment"},n.a.createElement(Et.a.Input,{required:!0,fluid:!0,transparent:!0,icon:"edit",iconPosition:"left",size:"big",placeholder:"Name",type:"text",name:"name",value:d,onChange:this.onNameChange}),n.a.createElement(na.a,null),n.a.createElement(Qt,{placeholder:"Start typing your thread content here...",editorState:m,wrapperClassName:"newThread-wrapper",toolbarClassName:"newThread-toolbar",editorClassName:"newThread-editor",onEditorStateChange:this.onEditorStateChange,handleBeforeInput:this.handleBeforeInput,handlePastedText:this.handlePastedText}),n.a.createElement(pt.a,{color:"blue",size:"small",loading:a,disabled:a,onClick:this.onSubmit},n.a.createElement(Y.a,{name:"edit"}),"Post thread"),n.a.createElement(pt.a,{color:"red",role:"none",size:"small",disabled:a,onClick:this.onSave},n.a.createElement(Y.a,{name:"save"}),"Save Draft"),n.a.createElement(pt.a,{role:"none",size:"small",disabled:a,onClick:this.onCancel},n.a.createElement(Y.a,{name:"cancel"}),"Clear"))):n.a.createElement("div",null,h," ",n.a.createElement("div",{className:"newThread-hidden"},n.a.createElement(pt.a,{size:"small",color:"blue",floated:"left",onClick:this.toggleShowEditor},n.a.createElement(Y.a,{name:"edit"}),"New Thread")))}}class oa extends r.Component{componentDidMount(){const e=this.props.match.params.forum;this.props.fetchForum(e)}componentWillReceiveProps(e){const t=this.props.match.params.forum,a=e.match.params.forum;t!==a&&this.props.fetchForum(a)}render(){const e=this.props,t=e.isLoading,a=e.name,r=e.slug,s=e.description,o=e.threads,i=e.error,l=e.isAuthenticated,c=e.newThreadLoading,d=e.newThreadSuccess,m=e.newThreadName,h=e.newThreadContent,u=e.newThreadId,E=e.newThreadError,p=e.newThreadShow,g=e.createThread,S=e.createThreadSave,f=e.createThreadToggle;return n.a.createElement("div",null,n.a.createElement(sa,{forum:r,isAuthenticated:l,isLoading:c,success:d,name:m,content:h,id:u,error:E,showEditor:p,createThread:g,updateNewThread:S,toggleShowEditor:f,maxLength:2e3}),n.a.createElement(ra,{isLoading:t,name:a,slug:r,description:s,threads:o,error:i}))}}Object(i.b)(e=>({isLoading:e.forum.isLoading,name:e.forum.name,slug:e.forum.slug,description:e.forum.description,threads:e.forum.threads,error:e.forum.error,isAuthenticated:e.auth.isAuthenticated,newThreadLoading:e.forum.newThreadLoading,newThreadSuccess:e.forum.newThreadSuccess,newThreadName:e.forum.newThreadName,newThreadContent:e.forum.newThreadContent,newThreadId:e.forum.newThreadId,newThreadError:e.forum.newThreadError,newThreadShow:e.forum.newThreadShow}),e=>({fetchForum:t=>{e((e=>t=>{t(Qe()),Se(e).then(e=>{t(ze(e.data))}).catch(e=>{const a=Te(e);t(Be(a))})})(t))},createThread:t=>{e(Ke(t))},createThreadSave:t=>{e((e=>({type:"CREATE_THREAD_SAVE",name:e.name,content:e.content}))(t))},createThreadToggle:()=>{e({type:"CREATE_THREAD_TOGGLE"})}}))(oa),a(588);class ia extends r.Component{render(){return n.a.createElement("div",null,n.a.createElement("div",{className:"not-found-page"},n.a.createElement(ut.a,null,n.a.createElement(ut.a.Content,null,n.a.createElement(ut.a.Header,null,"404 - Page Not Found"),"Sorry, but the page you were trying to view does not exist."))))}}var la=ia;const ca=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function da(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}o.a.render(n.a.createElement(i.a,{store:V},n.a.createElement(d.a,{loading:n.a.createElement(m,null),persistor:B},n.a.createElement(l.a,null,n.a.createElement(r.Fragment,null,n.a.createElement("header",{className:"header-background"}),n.a.createElement("div",{className:"app-layout"},n.a.createElement(ht,null),n.a.createElement(c.c,null,n.a.createElement(c.a,{path:"/user/:username",component:Ft}),n.a.createElement(c.a,{exact:!0,path:"/",component:aa}),n.a.createElement(c.a,{component:la}))),n.a.createElement(Ot,null))))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("","/service-worker.js");ca?(!function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):da(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):da(e)})}}()}},[[286,1,2]]]);
//# sourceMappingURL=main.5dde350f.chunk.js.map