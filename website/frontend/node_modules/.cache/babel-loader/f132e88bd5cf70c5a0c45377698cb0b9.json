{"ast":null,"code":"import { CREATE_POST_REQUEST, CREATE_POST_SUCCESS, CREATE_POST_FAILURE, DELETE_POST_REQUEST, DELETE_POST_SUCCESS, DELETE_POST_FAILURE } from './types';\nimport { createPostApi, fetchThreadApi, deletePostApi } from '../api';\nimport { fetchThreadSuccess, fetchThreadFailure } from './thread';\nimport { apiErrorHandler } from '../utils/errorhandler';\nexport const createPost = newPost => dispatch => {\n  dispatch(createPostRequest());\n  createPostApi(newPost).then(response => {\n    dispatch(createPostSuccess()); // re-load thread page\n\n    fetchThreadApi(newPost.thread_id).then(response => {\n      dispatch(fetchThreadSuccess(response.data));\n    }).catch(error => {\n      const errorMessage = apiErrorHandler(error);\n      dispatch(fetchThreadFailure(errorMessage));\n    });\n  }).catch(error => {\n    const errorMessage = apiErrorHandler(error);\n    dispatch(createPostFailure(errorMessage));\n  });\n};\nexport const createPostRequest = newPost => {\n  return {\n    type: CREATE_POST_REQUEST\n  };\n};\nexport const createPostSuccess = () => {\n  return {\n    type: CREATE_POST_SUCCESS\n  };\n};\nexport const createPostFailure = error => {\n  return {\n    type: CREATE_POST_FAILURE,\n    error\n  };\n};\nexport const deletePost = (id, threadID) => dispatch => {\n  dispatch(deletePostRequest(id));\n  deletePostApi(id).then(response => {\n    dispatch(deletePostSuccess(id)); // re-load thread page\n\n    fetchThreadApi(threadID).then(response => {\n      dispatch(fetchThreadSuccess(response.data));\n    }).catch(error => {\n      const errorMessage = apiErrorHandler(error);\n      dispatch(fetchThreadFailure(errorMessage));\n    });\n  }).catch(error => {\n    const errorMessage = apiErrorHandler(error);\n    dispatch(deletePostFailure(id, errorMessage));\n  });\n};\nexport const deletePostRequest = id => {\n  return {\n    type: DELETE_POST_REQUEST,\n    id\n  };\n};\nexport const deletePostSuccess = id => {\n  return {\n    type: DELETE_POST_SUCCESS,\n    id\n  };\n};\nexport const deletePostFailure = (id, error) => {\n  return {\n    type: DELETE_POST_FAILURE,\n    id,\n    error\n  };\n};","map":{"version":3,"sources":["/home/yi/Desktop/rengorum/frontend/src/actions/post.js"],"names":["CREATE_POST_REQUEST","CREATE_POST_SUCCESS","CREATE_POST_FAILURE","DELETE_POST_REQUEST","DELETE_POST_SUCCESS","DELETE_POST_FAILURE","createPostApi","fetchThreadApi","deletePostApi","fetchThreadSuccess","fetchThreadFailure","apiErrorHandler","createPost","newPost","dispatch","createPostRequest","then","response","createPostSuccess","thread_id","data","catch","error","errorMessage","createPostFailure","type","deletePost","id","threadID","deletePostRequest","deletePostSuccess","deletePostFailure"],"mappings":"AAAA,SACEA,mBADF,EAEEC,mBAFF,EAGEC,mBAHF,EAIEC,mBAJF,EAKEC,mBALF,EAMEC,mBANF,QAOO,SAPP;AAQA,SAAQC,aAAR,EAAuBC,cAAvB,EAAuCC,aAAvC,QAA2D,QAA3D;AACA,SAAQC,kBAAR,EAA4BC,kBAA5B,QAAqD,UAArD;AACA,SAAQC,eAAR,QAA8B,uBAA9B;AAEA,OAAO,MAAMC,UAAU,GAAGC,OAAO,IAAIC,QAAQ,IAAI;AAC/CA,EAAAA,QAAQ,CAACC,iBAAiB,EAAlB,CAAR;AAEAT,EAAAA,aAAa,CAACO,OAAD,CAAb,CACGG,IADH,CACQC,QAAQ,IAAI;AAChBH,IAAAA,QAAQ,CAACI,iBAAiB,EAAlB,CAAR,CADgB,CAGhB;;AACAX,IAAAA,cAAc,CAACM,OAAO,CAACM,SAAT,CAAd,CACGH,IADH,CACQC,QAAQ,IAAI;AAChBH,MAAAA,QAAQ,CAACL,kBAAkB,CAACQ,QAAQ,CAACG,IAAV,CAAnB,CAAR;AACD,KAHH,EAIGC,KAJH,CAISC,KAAK,IAAI;AACd,YAAMC,YAAY,GAAGZ,eAAe,CAACW,KAAD,CAApC;AACAR,MAAAA,QAAQ,CAACJ,kBAAkB,CAACa,YAAD,CAAnB,CAAR;AACD,KAPH;AAQD,GAbH,EAcGF,KAdH,CAcSC,KAAK,IAAI;AACd,UAAMC,YAAY,GAAGZ,eAAe,CAACW,KAAD,CAApC;AACAR,IAAAA,QAAQ,CAACU,iBAAiB,CAACD,YAAD,CAAlB,CAAR;AACD,GAjBH;AAkBD,CArBM;AAuBP,OAAO,MAAMR,iBAAiB,GAAGF,OAAO,IAAI;AAC1C,SAAO;AACLY,IAAAA,IAAI,EAAEzB;AADD,GAAP;AAGD,CAJM;AAMP,OAAO,MAAMkB,iBAAiB,GAAG,MAAM;AACrC,SAAO;AACLO,IAAAA,IAAI,EAAExB;AADD,GAAP;AAGD,CAJM;AAMP,OAAO,MAAMuB,iBAAiB,GAAGF,KAAK,IAAI;AACxC,SAAO;AACLG,IAAAA,IAAI,EAAEvB,mBADD;AAELoB,IAAAA;AAFK,GAAP;AAID,CALM;AAOP,OAAO,MAAMI,UAAU,GAAG,CAACC,EAAD,EAAKC,QAAL,KAAkBd,QAAQ,IAAI;AACtDA,EAAAA,QAAQ,CAACe,iBAAiB,CAACF,EAAD,CAAlB,CAAR;AAEAnB,EAAAA,aAAa,CAACmB,EAAD,CAAb,CACGX,IADH,CACQC,QAAQ,IAAI;AAChBH,IAAAA,QAAQ,CAACgB,iBAAiB,CAACH,EAAD,CAAlB,CAAR,CADgB,CAGhB;;AACApB,IAAAA,cAAc,CAACqB,QAAD,CAAd,CACGZ,IADH,CACQC,QAAQ,IAAI;AAChBH,MAAAA,QAAQ,CAACL,kBAAkB,CAACQ,QAAQ,CAACG,IAAV,CAAnB,CAAR;AACD,KAHH,EAIGC,KAJH,CAISC,KAAK,IAAI;AACd,YAAMC,YAAY,GAAGZ,eAAe,CAACW,KAAD,CAApC;AACAR,MAAAA,QAAQ,CAACJ,kBAAkB,CAACa,YAAD,CAAnB,CAAR;AACD,KAPH;AAQD,GAbH,EAcGF,KAdH,CAcSC,KAAK,IAAI;AACd,UAAMC,YAAY,GAAGZ,eAAe,CAACW,KAAD,CAApC;AACAR,IAAAA,QAAQ,CAACiB,iBAAiB,CAACJ,EAAD,EAAKJ,YAAL,CAAlB,CAAR;AACD,GAjBH;AAkBD,CArBM;AAuBP,OAAO,MAAMM,iBAAiB,GAAGF,EAAE,IAAI;AACrC,SAAO;AACLF,IAAAA,IAAI,EAAEtB,mBADD;AAELwB,IAAAA;AAFK,GAAP;AAID,CALM;AAOP,OAAO,MAAMG,iBAAiB,GAAGH,EAAE,IAAI;AACrC,SAAO;AACLF,IAAAA,IAAI,EAAErB,mBADD;AAELuB,IAAAA;AAFK,GAAP;AAID,CALM;AAOP,OAAO,MAAMI,iBAAiB,GAAG,CAACJ,EAAD,EAAKL,KAAL,KAAe;AAC9C,SAAO;AACLG,IAAAA,IAAI,EAAEpB,mBADD;AAELsB,IAAAA,EAFK;AAGLL,IAAAA;AAHK,GAAP;AAKD,CANM","sourcesContent":["import {\r\n  CREATE_POST_REQUEST,\r\n  CREATE_POST_SUCCESS,\r\n  CREATE_POST_FAILURE,\r\n  DELETE_POST_REQUEST,\r\n  DELETE_POST_SUCCESS,\r\n  DELETE_POST_FAILURE,\r\n} from './types';\r\nimport {createPostApi, fetchThreadApi, deletePostApi} from '../api';\r\nimport {fetchThreadSuccess, fetchThreadFailure} from './thread';\r\nimport {apiErrorHandler} from '../utils/errorhandler';\r\n\r\nexport const createPost = newPost => dispatch => {\r\n  dispatch(createPostRequest());\r\n\r\n  createPostApi(newPost)\r\n    .then(response => {\r\n      dispatch(createPostSuccess());\r\n\r\n      // re-load thread page\r\n      fetchThreadApi(newPost.thread_id)\r\n        .then(response => {\r\n          dispatch(fetchThreadSuccess(response.data));\r\n        })\r\n        .catch(error => {\r\n          const errorMessage = apiErrorHandler(error);\r\n          dispatch(fetchThreadFailure(errorMessage));\r\n        });\r\n    })\r\n    .catch(error => {\r\n      const errorMessage = apiErrorHandler(error);\r\n      dispatch(createPostFailure(errorMessage));\r\n    });\r\n};\r\n\r\nexport const createPostRequest = newPost => {\r\n  return {\r\n    type: CREATE_POST_REQUEST,\r\n  };\r\n};\r\n\r\nexport const createPostSuccess = () => {\r\n  return {\r\n    type: CREATE_POST_SUCCESS,\r\n  };\r\n};\r\n\r\nexport const createPostFailure = error => {\r\n  return {\r\n    type: CREATE_POST_FAILURE,\r\n    error,\r\n  };\r\n};\r\n\r\nexport const deletePost = (id, threadID) => dispatch => {\r\n  dispatch(deletePostRequest(id));\r\n\r\n  deletePostApi(id)\r\n    .then(response => {\r\n      dispatch(deletePostSuccess(id));\r\n\r\n      // re-load thread page\r\n      fetchThreadApi(threadID)\r\n        .then(response => {\r\n          dispatch(fetchThreadSuccess(response.data));\r\n        })\r\n        .catch(error => {\r\n          const errorMessage = apiErrorHandler(error);\r\n          dispatch(fetchThreadFailure(errorMessage));\r\n        });\r\n    })\r\n    .catch(error => {\r\n      const errorMessage = apiErrorHandler(error);\r\n      dispatch(deletePostFailure(id, errorMessage));\r\n    });\r\n};\r\n\r\nexport const deletePostRequest = id => {\r\n  return {\r\n    type: DELETE_POST_REQUEST,\r\n    id,\r\n  };\r\n};\r\n\r\nexport const deletePostSuccess = id => {\r\n  return {\r\n    type: DELETE_POST_SUCCESS,\r\n    id,\r\n  };\r\n};\r\n\r\nexport const deletePostFailure = (id, error) => {\r\n  return {\r\n    type: DELETE_POST_FAILURE,\r\n    id,\r\n    error,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}