{"ast":null,"code":"import{FETCH_THREAD_REQUEST,FETCH_THREAD_SUCCESS,FETCH_THREAD_FAILURE,CREATE_THREAD_REQUEST,CREATE_THREAD_SUCCESS,CREATE_THREAD_FAILURE,CREATE_THREAD_SAVE,CREATE_THREAD_TOGGLE,DELETE_THREAD_REQUEST,DELETE_THREAD_SUCCESS,DELETE_THREAD_FAILURE}from'./types';import{fetchThreadApi,createThreadApi,fetchForumApi,deleteThreadApi}from'../api';import{fetchForumSuccess,fetchForumFailure}from'./forum';import{apiErrorHandler}from'../utils/errorhandler';export const fetchThread=thread=>dispatch=>{dispatch(fetchThreadRequest());fetchThreadApi(thread).then(response=>{dispatch(fetchThreadSuccess(response.data));}).catch(error=>{const errorMessage=apiErrorHandler(error);dispatch(fetchThreadFailure(errorMessage));});};export const fetchThreadRequest=()=>{return{type:FETCH_THREAD_REQUEST};};export const fetchThreadSuccess=thread=>{return{type:FETCH_THREAD_SUCCESS,thread};};export const fetchThreadFailure=error=>{return{type:FETCH_THREAD_FAILURE,error};};export const createThread=newThread=>dispatch=>{dispatch(createThreadRequest(newThread));createThreadApi(newThread).then(response=>{dispatch(createThreadSuccess(response.data));// re-load forum page\nfetchForumApi(newThread.forum).then(response=>{dispatch(fetchForumSuccess(response.data));}).catch(error=>{const errorMessage=apiErrorHandler(error);dispatch(fetchForumFailure(errorMessage));});}).catch(error=>{const errorMessage=apiErrorHandler(error);dispatch(createThreadFailure(errorMessage));});};export const createThreadRequest=newThread=>{return{type:CREATE_THREAD_REQUEST,newThread};};export const createThreadSuccess=newThread=>{return{type:CREATE_THREAD_SUCCESS,newThread};};export const createThreadFailure=error=>{return{type:CREATE_THREAD_FAILURE,error};};export const createThreadSave=newThread=>{return{type:CREATE_THREAD_SAVE,name:newThread.name,content:newThread.content};};export const createThreadToggle=()=>{return{type:CREATE_THREAD_TOGGLE};};export const deleteThread=id=>dispatch=>{dispatch(deleteThreadRequest());deleteThreadApi(id).then(response=>{dispatch(deleteThreadSuccess());// re-load thread page\nfetchThreadApi(id).then(response=>{dispatch(fetchThreadSuccess(response.data));}).catch(error=>{const errorMessage=apiErrorHandler(error);dispatch(fetchThreadFailure(errorMessage));});}).catch(error=>{const errorMessage=apiErrorHandler(error);dispatch(deleteThreadFailure(errorMessage));});};export const deleteThreadRequest=()=>{return{type:DELETE_THREAD_REQUEST};};export const deleteThreadSuccess=()=>{return{type:DELETE_THREAD_SUCCESS};};export const deleteThreadFailure=error=>{return{type:DELETE_THREAD_FAILURE,error};};","map":{"version":3,"sources":["/home/yi/Desktop/rengorum/frontend/src/actions/thread.js"],"names":["FETCH_THREAD_REQUEST","FETCH_THREAD_SUCCESS","FETCH_THREAD_FAILURE","CREATE_THREAD_REQUEST","CREATE_THREAD_SUCCESS","CREATE_THREAD_FAILURE","CREATE_THREAD_SAVE","CREATE_THREAD_TOGGLE","DELETE_THREAD_REQUEST","DELETE_THREAD_SUCCESS","DELETE_THREAD_FAILURE","fetchThreadApi","createThreadApi","fetchForumApi","deleteThreadApi","fetchForumSuccess","fetchForumFailure","apiErrorHandler","fetchThread","thread","dispatch","fetchThreadRequest","then","response","fetchThreadSuccess","data","catch","error","errorMessage","fetchThreadFailure","type","createThread","newThread","createThreadRequest","createThreadSuccess","forum","createThreadFailure","createThreadSave","name","content","createThreadToggle","deleteThread","id","deleteThreadRequest","deleteThreadSuccess","deleteThreadFailure"],"mappings":"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","sourcesContent":["import {\r\n  FETCH_THREAD_REQUEST,\r\n  FETCH_THREAD_SUCCESS,\r\n  FETCH_THREAD_FAILURE,\r\n  CREATE_THREAD_REQUEST,\r\n  CREATE_THREAD_SUCCESS,\r\n  CREATE_THREAD_FAILURE,\r\n  CREATE_THREAD_SAVE,\r\n  CREATE_THREAD_TOGGLE,\r\n  DELETE_THREAD_REQUEST,\r\n  DELETE_THREAD_SUCCESS,\r\n  DELETE_THREAD_FAILURE,\r\n} from './types';\r\nimport {\r\n  fetchThreadApi,\r\n  createThreadApi,\r\n  fetchForumApi,\r\n  deleteThreadApi,\r\n} from '../api';\r\nimport {fetchForumSuccess, fetchForumFailure} from './forum';\r\nimport {apiErrorHandler} from '../utils/errorhandler';\r\n\r\nexport const fetchThread = thread => dispatch => {\r\n  dispatch(fetchThreadRequest());\r\n\r\n  fetchThreadApi(thread)\r\n    .then(response => {\r\n      dispatch(fetchThreadSuccess(response.data));\r\n    })\r\n    .catch(error => {\r\n      const errorMessage = apiErrorHandler(error);\r\n      dispatch(fetchThreadFailure(errorMessage));\r\n    });\r\n};\r\n\r\nexport const fetchThreadRequest = () => {\r\n  return {\r\n    type: FETCH_THREAD_REQUEST,\r\n  };\r\n};\r\n\r\nexport const fetchThreadSuccess = thread => {\r\n  return {\r\n    type: FETCH_THREAD_SUCCESS,\r\n    thread,\r\n  };\r\n};\r\n\r\nexport const fetchThreadFailure = error => {\r\n  return {\r\n    type: FETCH_THREAD_FAILURE,\r\n    error,\r\n  };\r\n};\r\n\r\nexport const createThread = newThread => dispatch => {\r\n  dispatch(createThreadRequest(newThread));\r\n\r\n  createThreadApi(newThread)\r\n    .then(response => {\r\n      dispatch(createThreadSuccess(response.data));\r\n\r\n      // re-load forum page\r\n      fetchForumApi(newThread.forum)\r\n        .then(response => {\r\n          dispatch(fetchForumSuccess(response.data));\r\n        })\r\n        .catch(error => {\r\n          const errorMessage = apiErrorHandler(error);\r\n          dispatch(fetchForumFailure(errorMessage));\r\n        });\r\n    })\r\n    .catch(error => {\r\n      const errorMessage = apiErrorHandler(error);\r\n      dispatch(createThreadFailure(errorMessage));\r\n    });\r\n};\r\n\r\nexport const createThreadRequest = newThread => {\r\n  return {\r\n    type: CREATE_THREAD_REQUEST,\r\n    newThread,\r\n  };\r\n};\r\n\r\nexport const createThreadSuccess = newThread => {\r\n  return {\r\n    type: CREATE_THREAD_SUCCESS,\r\n    newThread,\r\n  };\r\n};\r\n\r\nexport const createThreadFailure = error => {\r\n  return {\r\n    type: CREATE_THREAD_FAILURE,\r\n    error,\r\n  };\r\n};\r\n\r\nexport const createThreadSave = newThread => {\r\n  return {\r\n    type: CREATE_THREAD_SAVE,\r\n    name: newThread.name,\r\n    content: newThread.content,\r\n  };\r\n};\r\n\r\nexport const createThreadToggle = () => {\r\n  return {\r\n    type: CREATE_THREAD_TOGGLE,\r\n  };\r\n};\r\n\r\nexport const deleteThread = id => dispatch => {\r\n  dispatch(deleteThreadRequest());\r\n\r\n  deleteThreadApi(id)\r\n    .then(response => {\r\n      dispatch(deleteThreadSuccess());\r\n\r\n      // re-load thread page\r\n      fetchThreadApi(id)\r\n        .then(response => {\r\n          dispatch(fetchThreadSuccess(response.data));\r\n        })\r\n        .catch(error => {\r\n          const errorMessage = apiErrorHandler(error);\r\n          dispatch(fetchThreadFailure(errorMessage));\r\n        });\r\n    })\r\n    .catch(error => {\r\n      const errorMessage = apiErrorHandler(error);\r\n      dispatch(deleteThreadFailure(errorMessage));\r\n    });\r\n};\r\n\r\nexport const deleteThreadRequest = () => {\r\n  return {\r\n    type: DELETE_THREAD_REQUEST,\r\n  };\r\n};\r\n\r\nexport const deleteThreadSuccess = () => {\r\n  return {\r\n    type: DELETE_THREAD_SUCCESS,\r\n  };\r\n};\r\n\r\nexport const deleteThreadFailure = error => {\r\n  return {\r\n    type: DELETE_THREAD_FAILURE,\r\n    error,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}