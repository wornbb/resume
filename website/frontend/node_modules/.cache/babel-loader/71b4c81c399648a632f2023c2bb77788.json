{"ast":null,"code":"import{CREATE_POST_REQUEST,CREATE_POST_SUCCESS,CREATE_POST_FAILURE,DELETE_POST_REQUEST,DELETE_POST_SUCCESS,DELETE_POST_FAILURE}from'./types';import{createPostApi,fetchThreadApi,deletePostApi}from'../api';import{fetchThreadSuccess,fetchThreadFailure}from'./thread';import{apiErrorHandler}from'../utils/errorhandler';export const createPost=newPost=>dispatch=>{dispatch(createPostRequest());createPostApi(newPost).then(response=>{dispatch(createPostSuccess());// re-load thread page\nfetchThreadApi(newPost.thread_id).then(response=>{dispatch(fetchThreadSuccess(response.data));}).catch(error=>{const errorMessage=apiErrorHandler(error);dispatch(fetchThreadFailure(errorMessage));});}).catch(error=>{const errorMessage=apiErrorHandler(error);dispatch(createPostFailure(errorMessage));});};export const createPostRequest=newPost=>{return{type:CREATE_POST_REQUEST};};export const createPostSuccess=()=>{return{type:CREATE_POST_SUCCESS};};export const createPostFailure=error=>{return{type:CREATE_POST_FAILURE,error};};export const deletePost=(id,threadID)=>dispatch=>{dispatch(deletePostRequest(id));deletePostApi(id).then(response=>{dispatch(deletePostSuccess(id));// re-load thread page\nfetchThreadApi(threadID).then(response=>{dispatch(fetchThreadSuccess(response.data));}).catch(error=>{const errorMessage=apiErrorHandler(error);dispatch(fetchThreadFailure(errorMessage));});}).catch(error=>{const errorMessage=apiErrorHandler(error);dispatch(deletePostFailure(id,errorMessage));});};export const deletePostRequest=id=>{return{type:DELETE_POST_REQUEST,id};};export const deletePostSuccess=id=>{return{type:DELETE_POST_SUCCESS,id};};export const deletePostFailure=(id,error)=>{return{type:DELETE_POST_FAILURE,id,error};};","map":{"version":3,"sources":["/home/yi/Desktop/rengorum/frontend/src/actions/post.js"],"names":["CREATE_POST_REQUEST","CREATE_POST_SUCCESS","CREATE_POST_FAILURE","DELETE_POST_REQUEST","DELETE_POST_SUCCESS","DELETE_POST_FAILURE","createPostApi","fetchThreadApi","deletePostApi","fetchThreadSuccess","fetchThreadFailure","apiErrorHandler","createPost","newPost","dispatch","createPostRequest","then","response","createPostSuccess","thread_id","data","catch","error","errorMessage","createPostFailure","type","deletePost","id","threadID","deletePostRequest","deletePostSuccess","deletePostFailure"],"mappings":"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","sourcesContent":["import {\r\n  CREATE_POST_REQUEST,\r\n  CREATE_POST_SUCCESS,\r\n  CREATE_POST_FAILURE,\r\n  DELETE_POST_REQUEST,\r\n  DELETE_POST_SUCCESS,\r\n  DELETE_POST_FAILURE,\r\n} from './types';\r\nimport {createPostApi, fetchThreadApi, deletePostApi} from '../api';\r\nimport {fetchThreadSuccess, fetchThreadFailure} from './thread';\r\nimport {apiErrorHandler} from '../utils/errorhandler';\r\n\r\nexport const createPost = newPost => dispatch => {\r\n  dispatch(createPostRequest());\r\n\r\n  createPostApi(newPost)\r\n    .then(response => {\r\n      dispatch(createPostSuccess());\r\n\r\n      // re-load thread page\r\n      fetchThreadApi(newPost.thread_id)\r\n        .then(response => {\r\n          dispatch(fetchThreadSuccess(response.data));\r\n        })\r\n        .catch(error => {\r\n          const errorMessage = apiErrorHandler(error);\r\n          dispatch(fetchThreadFailure(errorMessage));\r\n        });\r\n    })\r\n    .catch(error => {\r\n      const errorMessage = apiErrorHandler(error);\r\n      dispatch(createPostFailure(errorMessage));\r\n    });\r\n};\r\n\r\nexport const createPostRequest = newPost => {\r\n  return {\r\n    type: CREATE_POST_REQUEST,\r\n  };\r\n};\r\n\r\nexport const createPostSuccess = () => {\r\n  return {\r\n    type: CREATE_POST_SUCCESS,\r\n  };\r\n};\r\n\r\nexport const createPostFailure = error => {\r\n  return {\r\n    type: CREATE_POST_FAILURE,\r\n    error,\r\n  };\r\n};\r\n\r\nexport const deletePost = (id, threadID) => dispatch => {\r\n  dispatch(deletePostRequest(id));\r\n\r\n  deletePostApi(id)\r\n    .then(response => {\r\n      dispatch(deletePostSuccess(id));\r\n\r\n      // re-load thread page\r\n      fetchThreadApi(threadID)\r\n        .then(response => {\r\n          dispatch(fetchThreadSuccess(response.data));\r\n        })\r\n        .catch(error => {\r\n          const errorMessage = apiErrorHandler(error);\r\n          dispatch(fetchThreadFailure(errorMessage));\r\n        });\r\n    })\r\n    .catch(error => {\r\n      const errorMessage = apiErrorHandler(error);\r\n      dispatch(deletePostFailure(id, errorMessage));\r\n    });\r\n};\r\n\r\nexport const deletePostRequest = id => {\r\n  return {\r\n    type: DELETE_POST_REQUEST,\r\n    id,\r\n  };\r\n};\r\n\r\nexport const deletePostSuccess = id => {\r\n  return {\r\n    type: DELETE_POST_SUCCESS,\r\n    id,\r\n  };\r\n};\r\n\r\nexport const deletePostFailure = (id, error) => {\r\n  return {\r\n    type: DELETE_POST_FAILURE,\r\n    id,\r\n    error,\r\n  };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}